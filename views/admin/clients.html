<script src="../../Scripts/clientsController.js">
</script>
<section class="content-header">
    <h1>
            Espace Administrateur            
          </h1>
</section>

<!-- Main content -->
<section class="content" ng-controller="clientsController">
    <!-- Fenetre modifier -->
<script type="text/ng-template" id="templateId">
    <h1>Template heading</h1>
    <p>Content goes here</p>
</script>
    <div class="box box-warning">
        <li><a href="#addclient"><i class="fa fa-link"></i> <span>Nouveau client</span></a></li>
        <div class="box-header with-border">
            <h3 class="box-title">Liste des clients</h3>
        </div>
        <!-- /.box-header -->
        <div class="box-body" >
  

            <table class="table table-bordered table-striped">
                <thead>
                    <tr >
                        <th>Cin</th>
                        <th>Client</th>
                        <th>Mobile</th>
                        <th>Email</th>
                        <th>Nature</th>
                        <th>Marque Véhicule</th>
                        <th>Modèle</th>
                        <th>action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="client in clients">
                    <td>{{client.cin}}</td>
                    <td>{{client.nom}} {{client.prenom}}</td>
                    <td>{{client.tel}}</td>
                    <td>{{client.email}}</td>
                    <td>{{client.nature_veh}}</td>    
                    <td>{{client.marque_veh}}</td>    
                    <td>{{client.modele_veh}}</td>    
                        <td>
                        <button class="btn btn-primary btn-sm" ng-click='editrow(client)'>Modifier</button>
                        <button class="btn btn-primary btn-sm" ng-click='deleteclient(client.cin)'>Supprimer</button>
                        </td>
                    </tr>
                </tbody>
                
            </table>
        </div>
    </div>
    <div id="editClient" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Modifier Client : {{client.nom}} {{client.prenom}}</h4>
      </div>
      <div class="modal-body">
    <form role="form" name="userForm" ng-submit="confirmedit()">
                <!-- Validation messages for both error and success -->
                <div class="alert alert-success" ng-show='message !=null'>{{message}}</div>
                <div class="alert alert-danger" ng-show='notok !=null'>{{notok}}</div>
                <div class="form-group">
                    <label>Cin</label>
                    <input type="text" disabled class="form-control" name="cin" pattern="[0-9]{8}" placeholder="Carte d'identité" ng-model="client.cin" required>
                </div>
                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" class="form-control" name="nom" placeholder="Nom" ng-model="client.nom" required>
                </div>
                <div class="form-group">
                    <label>Prénom</label>
                    <input type="text" class="form-control" name="prenom" placeholder="Prénom" ng-model="client.prenom" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" name="email" placeholder="Votre adresse electronique" ng-model="client.email">
                </div>
                <div class="form-group">
                    <label>Teléphone</label>
                    <input type="text" class="form-control" name="tel" pattern="[0-9]{8}" placeholder="Numero du tel" ng-model="client.tel" required>
                </div>

                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type=password class="form-control" name="password"  ng-model="client.password" required>
                </div>
                <div class="form-group">
                    <label>Nature Véhicule</label>
                    <select class="form-control" ng-model="client.nature_veh">
                            <option value="Voiture">Voiture</option>
                            <option value="Moteur">Moteur</option>
                            <option value="Camion">Camion</option>
                        </select>
                </div>
                <div class="form-group">
                    <label>Marque Véhicule</label>
                    <input type="text" class="form-control" name="marque_veh" placeholder="Marque véhicule" ng-model="client.marque_veh" required>
                </div>
                <div class="form-group">
                    <label>Modèle Véhicule</label>
                    <input type="text" class="form-control" name="modele_veh" placeholder="Modèle véhicule" ng-model="client.modele_veh" required>
                </div>


                <div class="box-footer">
                    <button type="submit" class="btn btn-primary">Confirmer</button>
                </div>



            </form>

      </div>
      <div  class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    </div>
</div>

       <!-- Dialog de suppression-->
      <div id="deleterow" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div  class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Supprimer Client</h4>
      </div>
      <div class="modal-body">
        <p>Voulez vous supprimer le client {{client.nom}} {{client.prenom}} </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

 </section>